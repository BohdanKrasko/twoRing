(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{115:function(e,t,n){},117:function(e,t,n){},118:function(e,t){},129:function(e,t,n){},130:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(23),o=n.n(s),i=(n(115),n(116),n(12)),c=n(13),u=n(17),l=n(16),d=(n(82),n(52)),h=n(19),p=n(44),f=n(135),j=n(134),m=(n(117),n(118),n(4)),b=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e))._isMounted=!1,r.openEnterEnterRoom=function(){return r.setState({isEnterEnterRoomModalVisibility:!0})},r.closeEnterEnterRoom=function(){return r.setState({isEnterEnterRoomModalVisibility:!1})},r.setRoomName=function(){return r.setState({roomName:document.getElementById("poolName").value})},r.handleOk=function(){r.closeEnterEnterRoom(!1)},r.state={el:"#app",roomName:"",data:{isEnterEnterRoomModalVisibility:!1}},r}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{id:"divElement",children:[Object(m.jsx)(p.a,{onClick:this.openEnterEnterRoom,size:"large",children:"Secret Room"}),Object(m.jsxs)(f.a,{title:"Name of Room",visible:this.state.isEnterEnterRoomModalVisibility,onOk:this.handleOk,onCancel:this.closeEnterEnterRoom,centered:"true",footer:null,closable:"false",children:[Object(m.jsx)(j.a,{placeholder:"Room name. 719",id:"poolName",autocomplete:"off",onChange:function(){e.setState({roomName:document.getElementById("poolName").value})}}),Object(m.jsx)(d.b,{to:"/".concat(this.state.roomName,"/magic"),children:Object(m.jsx)(p.a,{onClick:this.handleOk,size:"large",children:"Join"})})]})]})})}}]),n}(r.Component),x=n(7),g=n.n(x),v=n(15),O=n(136),k=n(133),w=n(137),y=n.p+"static/media/plane.2a4fb381.png",E=n.p+"static/media/ring.2c130f4b.png",R=(n(129),j.a.TextArea,function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e))._isMounted=!1,r.openEnterEnterRoom=function(){return r.setState({isEnterEnterRoomModalVisibility:!0})},r.closeEnterEnterRoom=function(){return r.setState({isEnterEnterRoomModalVisibility:!1})},r.closeTextModal=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.setState({textModal:!1});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),r.openTextModal=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.setState({textModal:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),r.closeRingModal=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.setState({ringModal:!1});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),r.openRingModal=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.setState({ringModal:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),r.closeWaitTag=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.setState({tagWait:!1}));case 1:case"end":return e.stop()}}),e)}))),r.openWaitTag=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.setState({tagWait:!0}));case 1:case"end":return e.stop()}}),e)}))),r.sleep=function(e){return new Promise((function(t){return setTimeout(t,e)}))},r.handleOk=function(){r.closeEnterEnterRoom(!1)},r.state={el:"#app",rooms:[],serverUrl:"ws://54.86.95.112:80/ws",roomInput:null,users:[],isEnterEnterRoomModalVisibility:!1,data:{ws:null},textModal:!1,ringModal:!1,tagWait:!0},r}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({roomInput:this.props.match.params.roomName});case 2:return e.next=4,this.connect();case 4:return e.next=6,this.joinRoom();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connectToWebsocket();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"connectToWebsocket",value:function(){var e=Object(v.a)(g.a.mark((function e(){var t=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,new WebSocket(this.state.serverUrl+"?name="+this.props.match.params.roomName);case 3:return e.t1=e.sent,e.t2={ws:e.t1},e.t3={data:e.t2},e.next=8,e.t0.setState.call(e.t0,e.t3);case 8:return e.next=10,this.state.data.ws.addEventListener("open",function(){var e=Object(v.a)(g.a.mark((function e(n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.onWebsocketOpen(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,this.state.data.ws.addEventListener("message",function(){var e=Object(v.a)(g.a.mark((function e(n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.handleNewMessage(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 12:return e.next=14,this.state.data.ws.addEventListener("close",function(){var e=Object(v.a)(g.a.mark((function e(n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.onWebsocketClose(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onWebsocketOpen",value:function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("connected to WS!"),this.currentReconnectDelay=1e3;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onWebsocketClose",value:function(){var e=this;this.ws=null,setTimeout((function(){e.reconnectToWebsocket()}),this.currentReconnectDelay)}},{key:"reconnectToWebsocket",value:function(){this.currentReconnectDelay<this.maxReconnectDelay&&(this.currentReconnectDelay*=2),this.connectToWebsocket()}},{key:"handleNewMessage",value:function(){var e=Object(v.a)(g.a.mark((function e(t){var n,r,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.data,console.log("handleNewMessage "+n),n=n.split(/\r?\n/),r=0;case 4:if(!(r<n.length)){e.next=35;break}if(!(a=JSON.parse(n[r])).message.includes("joined the room")){e.next=16;break}return this.closeWaitTag(),e.next=10,this.sleep(2e3);case 10:return this.openEnterEnterRoom(),e.next=13,this.sleep(5e3);case 13:return this.closeEnterEnterRoom(),e.next=16,this.openTextModal();case 16:e.t0=a.action,e.next="send-message"===e.t0?19:"user-join"===e.t0?22:"user-left"===e.t0?25:"room-joined"===e.t0?28:31;break;case 19:return console.log("send-message"),this.handleChatMessage(a),e.abrupt("break",32);case 22:return console.log("user-join"),this.handleUserJoined(a),e.abrupt("break",32);case 25:return console.log("user-left"),this.handleUserLeft(a),e.abrupt("break",32);case 28:return console.log("room-joined"),this.handleRoomJoined(a),e.abrupt("break",32);case 31:return e.abrupt("break",32);case 32:r++,e.next=4;break;case 35:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleChatMessage",value:function(e){var t=this.findRoom(e.target.id);"undefined"!==typeof t&&t.messages.push(e)}},{key:"handleUserJoined",value:function(e){console.log("msg j"+JSON.stringify(e)),this.userExists(e.sender)||this.state.users.push(e.sender)}},{key:"handleUserLeft",value:function(e){console.log("msg "+JSON.stringify(e));for(var t=0;t<this.state.users.length;t++)if(this.state.users[t].id==e.sender.id)return void this.state.users.splice(t,1)}},{key:"handleRoomJoined",value:function(e){var t=e.target;t.name=t.private?e.sender.name:t.name,t.messages=[],t.newMessage="jhgsdjhckjsdhkcnksdjn",this.state.rooms.push(t),console.log(this.state)}},{key:"sendMessage",value:function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t.id),console.log(t.name),""===t.newMessage){e.next=6;break}return e.next=5,this.state.data.ws.send(JSON.stringify({action:"send-message",message:t.newMessage,target:{id:t.id,name:t.name}}));case 5:t.newMessage="";case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findRoom",value:function(e){for(var t=0;t<this.state.rooms.length;t++)if(this.state.rooms[t].id===e)return this.state.rooms[t]}},{key:"joinRoom",value:function(){var e=Object(v.a)(g.a.mark((function e(){var t,n=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("joinRoom "+this.state.roomInput),t=this.state.roomInput,this.state.data.ws.onopen=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.state.data.ws.send(JSON.stringify({action:"join-room",message:t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.setState({roomInput:""});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"leaveRoom",value:function(e){var t=this;this.state.data.ws.onopen=Object(v.a)(g.a.mark((function n(){return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.state.data.ws.send(JSON.stringify({action:"leave-room",message:e.id}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));for(var n=0;n<this.state.rooms.length;n++)if(this.state.rooms[n].id===e.id){this.state.rooms.splice(n,1);break}}},{key:"userExists",value:function(e){for(var t=0;t<this.state.users.length;t++)if(this.state.users[t].id===e.id)return!0;return!1}},{key:"render",value:function(){var e=this;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{id:"divElement",children:[Object(m.jsx)("div",{id:"tag2",children:Object(m.jsx)(O.a,{color:"green",visible:this.state.tagWait,children:"Wait for a magic ..."})}),Object(m.jsxs)(f.a,{visible:this.state.isEnterEnterRoomModalVisibility,onCancel:this.closeEnterEnterRoom,centered:"true",footer:null,closable:"false",children:[Object(m.jsx)(k.a,{orientation:"Center",children:"I fly to you \ud83d\udc9c"}),Object(m.jsx)("div",{children:Object(m.jsx)("img",{id:"plane",width:"100%",height:"100%",src:y})}),Object(m.jsx)("div",{id:"tag",children:Object(m.jsx)(O.a,{icon:Object(m.jsx)(w.a,{spin:!0}),color:"processing",children:"Yyyyyeeeee almost done)"})})]})]}),Object(m.jsx)("div",{children:Object(m.jsxs)(f.a,{visible:this.state.textModal,footer:null,width:"80%",children:[Object(m.jsxs)("div",{id:"text",children:[Object(m.jsx)("div",{id:"tag2",children:Object(m.jsx)(O.a,{color:"magenta",children:"\u041a\u043e\u043b\u0438 \u043f\u0435\u0440\u0448\u0438\u0439 \u0440\u0430\u0437 \u0442\u0435\u0431\u0435 \u043f\u043e\u0431\u0430\u0447\u0438\u0432 \u0442\u043e \u043d\u0430 \u0445\u0432\u0438\u043b\u0438\u043d\u0443 \u043f\u0440\u043e\u0441\u0442\u043e \u0437\u0430\u0432\u043c\u0435\u0440 \u043d\u0435 \u0440\u043e\u0437\u0443\u043c\u0456\u0432 \u0449\u043e \u0432\u0456\u0434\u0431\u0443\u0432\u0430\u0454\u0442\u044c\u0441\u044f."})}),Object(m.jsx)("div",{id:"tag2",children:Object(m.jsx)(O.a,{color:"red",children:"\u0406 \u0432 \u0433\u043e\u043b\u043e\u0432\u0456 \u0431\u0443\u043b\u0430 \u0442\u0456\u043b\u044c\u043a\u0438 \u043e\u0434\u043d\u0430 \u0434\u0443\u043c\u043a\u0430 \u044f\u043a \u043f\u043e\u0437\u043d\u0430\u0439\u043e\u043c\u0438\u0442\u0438\u0441\u044f \u0437 \u0442\u043e\u0431\u043e\u044e) \u0456 \u0434\u0430 \u0442\u0438 \u0432\u0436\u0435 \u0437\u043d\u0430\u0454\u0448 \u0434\u043e \u0447\u043e\u0433\u043e \u0434\u043e\u0434\u0443\u043c\u0430\u0432\u0441\u044f)"})}),Object(m.jsx)("div",{id:"tag2",children:Object(m.jsx)(O.a,{color:"volcano",children:"\u041a\u043e\u043b\u0438 \u043c\u0438 \u0440\u0430\u0437\u043e\u043c \u0447\u0430\u0441 \u043f\u0440\u043e\u0445\u043e\u0434\u0438\u0442\u044c \u0434\u0443\u0443\u0443\u0443\u0436\u0435 \u0448\u0432\u0438\u0434\u043a\u043e \u0456\u043d\u043a\u043e\u043b\u0438 \u0445\u043e\u0447\u0435\u0442\u044c \u043f\u0440\u043e\u0441\u0442\u043e \u0440\u0430\u0437\u043e\u043c \u0441\u0438\u0434\u0456\u0442\u0438 \u0432 \u043e\u0431\u043d\u0456\u043c\u043a\u0443 \u0434\u043e \u0440\u0430\u043d\u043a\u0443."})}),Object(m.jsx)("div",{id:"tag2",children:Object(m.jsx)(O.a,{color:"orange",children:"\u0421\u043f\u043e\u0434\u0456\u0432\u0430\u044e\u0441\u044c \u0432\u0441\u0456 \u043c\u0438\u043d\u0443\u043b\u0456 \u0440\u0430\u0437\u0438 \u0442\u043e\u0431\u0456 \u0441\u043f\u043e\u0434\u043e\u0431\u0430\u043b\u0438\u0441\u044f, \u0434\u0430 \u0431\u0443\u043b\u0438 \u0440\u0456\u0437\u043d\u0456 \u043c\u043e\u043c\u0435\u043d\u0442\u0438 \u043d\u0430\u043f\u0440\u0438\u043a\u043b\u0430\u0434 \u043c\u043e\u0433\u043b\u043e \u0441\u0432\u0456\u0442\u043b\u043e \u043f\u043e\u0442\u0443\u0445\u043d\u0443\u0442\u0438, \u0430\u0431\u043e \u0441\u0444\u0456\u0442\u043b\u043e\u0444\u043e\u0432\u043e\u0440 \u043d\u0435 \u0440\u043e\u0431\u0438\u0442\u0438 \u0431\u043e \u043c\u0430\u0448\u0438\u043d\u0438 \u0442\u0430\u043c \u043d\u0435 \u0457\u0437\u0434\u044f\u0442\u044c)"})}),Object(m.jsx)("div",{id:"tag2",children:Object(m.jsx)(O.a,{color:"gold",children:"\u041c\u0438 \u043d\u0435 \u0442\u0430\u043a \u0434\u043e\u0432\u0433\u043e \u0437\u043d\u0430\u0439\u043e\u043c\u0456 \u0456 \u043c\u043e\u0436\u043b\u0438\u0432\u043e \u0431\u0430\u0433\u0430\u0442\u043e \u0447\u043e\u0433\u043e \u043d\u0435 \u0437\u043d\u0430\u0454\u043c\u043e \u043e\u0434\u0438\u043d \u043f\u0440\u043e \u043e\u0434\u043d\u043e\u0433\u043e, \u0430\u043b\u0435 \u0437 \u043a\u043e\u0436\u043d\u0438\u043c \u043d\u043e\u0432\u0438\u043c \u0444\u0430\u043a\u0442\u043e\u043c \u043c\u0438 \u0437\u0430\u0432\u0436\u0434\u0438 \u043d\u0430\u0445\u043e\u0434\u0438\u043b\u0438 \u0449\u043e\u0441\u044c \u0441\u043f\u0456\u043b\u044c\u043d\u0435 \u043d\u0430\u0432\u0456\u0442\u044c \u0432\u0430\u0440\u0456\u0430\u043d\u0442 \u043b\u0430\u0431 \u0431\u0443\u0432 \u043e\u0434\u043d\u0430\u043a\u043e\u0432\u0438\u0439, \u0430 \u0446\u0435 \u043f\u0440\u043e \u0449\u043e\u0441\u044c \u0433\u043e\u0432\u043e\u0440\u0438\u0442\u044c \u0434\u0430 \u0434\u0430)"})}),Object(m.jsx)("div",{id:"tag2",children:Object(m.jsx)(O.a,{color:"lime",children:"\u0406 \u0445\u043e\u0447\u0443 \u0441\u043a\u0430\u0437\u0430\u0442\u0438 \u0442\u043e\u0431\u0456 \u043e\u0434\u043d\u0456 \u0441\u043b\u043e\u0432\u0430 \u0437\u043d\u043e\u0432\u0443 \u043d\u0435 \u0442\u0456\u043b\u044c\u043a\u0438 \u043d\u0430\u043f\u0438\u0441\u0430\u0432\u0448\u0438 \u0457\u0445, \u0430 \u0456 \u0432 \u0436\u0438\u0432\u0443."})}),Object(m.jsx)("div",{id:"tag2",children:Object(m.jsx)(O.a,{color:"green",children:"\u0422\u0438 "})}),Object(m.jsx)("div",{id:"tag2",children:Object(m.jsx)(O.a,{color:"cyan",children:"\u043c\u0435\u043d\u0456 "})}),Object(m.jsx)("div",{id:"tag2",children:Object(m.jsx)(O.a,{color:"blue",children:" \u043f\u043e\u0434\u043e\u0431\u0430\u0454\u0448\u0441\u044f."})}),Object(m.jsx)("div",{id:"tag2",children:Object(m.jsx)(O.a,{color:"geekblue",children:"\u0414\u0430\u0432\u0430\u0439 \u0431\u0443\u0442\u0438 \u0440\u0430\u0437\u043e\u043c."})})]}),Object(m.jsx)(p.a,{onClick:function(){e.closeTextModal(),e.openRingModal()},size:"large",children:"\u041d\u0430\u0442\u0438\u0441\u043d\u0438 \u043c\u0435\u043d\u0435"})]})}),Object(m.jsx)("div",{id:"divElement",children:Object(m.jsxs)(f.a,{visible:this.state.ringModal,footer:null,children:[Object(m.jsx)(k.a,{orientation:"Center",children:"Will you my girlfrend?"}),Object(m.jsx)("div",{children:Object(m.jsx)("img",{id:"ring",width:"100%",height:"100%",src:E})})]})})]})}}]),n}(r.Component)),M=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(m.jsxs)(d.a,{children:[Object(m.jsx)(h.a,{exact:!0,path:"/",component:b}),Object(m.jsx)(h.a,{exact:!0,path:"/:roomName/magic",component:R})]})}}]),n}(r.Component),S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,138)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),s(e),o(e)}))};o.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(M,{})}),document.getElementById("root")),S()},82:function(e,t,n){}},[[130,1,2]]]);
//# sourceMappingURL=main.1bde08fd.chunk.js.map